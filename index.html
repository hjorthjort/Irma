<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="stylesheets/bootstrap_flatly.css">
        <!-- Import jQuery -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <link type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">

        <!-- Plugin CSS -->
        <link rel="stylesheet" href="stylesheets/style.css" type="text/css">
        <link rel="stylesheet" href="stylesheets/animate.css" type="text/css">

        <script src="js/wow.min.js"></script>
        <script>
            new WOW().init();
        </script>

        <title>Irma: Friendly and fast tech support</title>
    </head>
    <neck></neck>
    <body>
        <div class="jumbotron">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2">
                    <h1>Jumbotron</h1>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2">
                    <p>This is a simple hero unit, a simple jumbotron-style component for calling extra attention to featured content or information.</p>
                    <p><a class="btn btn-primary btn-lg">Learn more</a></p>
                </div>
            </div>
        </div>
        <section id="errands_section">
            <div class="container">
                <div id="errands_list" class="row">

                </div>
            </div>
        </section>
        <script>
            var description = "Lorem ipsum dolor sit amet, cu sit probo eirmod mnesarchum, at viris similique pri. Mei quaerendum theophrastus te. Duo ne ferri volumus adipisci. Te per meis solum alterum. Quo patrioque deterruisset an.";
            var soundfile = 'files/id001.mp3';
            var tags = ['monitor', 'wifi', 'crying', 'super powers', 'explorer', 'arch linux' ];
            var phone = "0763 16 22 40"

            addErrand(description, soundfile, tags, phone);
            addErrand(description, soundfile, tags, phone);
            addErrand(description, soundfile, tags, phone);
            addErrand(description, soundfile, tags, phone);
            addErrand(description, soundfile, tags, phone);
            addErrand(description, soundfile, tags, phone);

            function addErrand(description, soundfile, tags, phone) {
                //Create table element
                var newErrand = document.createElement("div");
                newErrand.classList.add("col-lg-6");

                //Create panel
                var panel = document.createElement("div");
                panel.classList.add("panel-primary");

                var panelHeading = document.createElement("div");
                panelHeading.classList.add("panel-heading")

                //create panel heading
                var panelTitle = document.createElement("h3");
                panelTitle.classList.add("panel-title");
                //add all tags, comma separated
                tags.forEach(function (element, index, array) {
                    panelTitle.innerHTML += element;
                    if (index < array.length -1) {
                        panelTitle.innerHTML += ", ";
                    }
                });

                // create body
                var panelBody = document.createElement("div");
                panelBody.classList.add("panel-body");

                var panelLeft = document.createElement("div");
                panelLeft.classList.add("col-lg-4", "row");

                var panelImage = document.createElement("i");
                panelImage.classList.add("fa", "fa-laptop", "fa-5x", "wow", "bounceIn", "col-lg-12", "text-center");
                panelImage.setAttribute("data-wow-delay", ".2s");

                var panelButton = document.createElement("a");
                panelButton.classList.add("btn", "btn-info", "col-lg-12", "text-bottom");
                panelButton.innerHTML = "I can help!";
                panelButton.onclick = function () {
                    panelButton.innerHTML = phone;
                    panelButton.classList.remove("btn-info");
                    panelButton.classList.add("btn-success");
                };

                // create description
                var panelDescription = document.createElement("p");
                panelDescription.classList.add("col-lg-8");
                panelDescription.innerHTML = description;

                // create soundfile
                var panelSoundfile = document.createElement("audio");
                //Display the audio with controls
                panelSoundfile.setAttribute("controls", "controls");
                var source = document.createElement("source");
                source.setAttribute("src", soundfile);
                source.setAttribute("type", "audio/mpeg");
                source.setAttribute("preload", "metadata");
                panelSoundfile.appendChild(source);


                //put the elements in each other
                panelLeft.appendChild(panelImage);
                panelLeft.appendChild(panelButton);
                panelBody.appendChild(panelLeft);
                panelBody.appendChild(panelDescription).appendChild(panelSoundfile);
                panelHeading.appendChild(panelTitle);
                panel.appendChild(panelHeading)
                panel.appendChild(panelBody);
                newErrand.appendChild(panel);
                $("#errands_list").append(newErrand);
            }
        </script>
    </body>
</html>
